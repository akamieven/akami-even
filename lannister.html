<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta name="color-scheme" content="dark light">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="إقتباسات رواية أغنيَّة الجَليد والنَّار باللغة العربية" />
  <meta name="author" content="Akami Even" />
  <title>إقتباسات رواية أغنية الجليد والنار - آل لانستر</title>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />


  <link rel="icon" href="https://i.postimg.cc/1zw198Pr/Picsart-25-05-01-18-19-21-090.jpg" type="image/png" />

<link rel="stylesheet" href="style.css">
<style>
    :root {
      --accent-color: #FFD700;
    }
  </style>
</head>
<body class="lannisterpic">

  <div class="overlay"></div>

  <header>
    <button class="menu-toggle" onclick="toggleSidebar()">☰</button>
  </header>

<div id="sidebar-container"></div>
<div id="family-identity" style="display: none;">
    <span id="family-name">العوائل</span>
    <div id="family-logo">
    <img src="https://i.postimg.cc/qMhDBJ9p/Picsart-25-12-27-10-49-18-998.webp" class="sigils2">
    
</div>
</div>

  <div class="content">
    <h1 lang="en">Hear Me Roar</h1>
  <p style="font-size: 25px;">«اسمعوا زئيري»</p>
    <p style="font-size: 45px;">آل لانستر</p>
   <div class="inline-controls">
  <a href="index.html" class="home-link">
    <span class="material-symbols-outlined">home</span>
  </a>

  <button class="home-link" onclick="toggleSearch()" title="بحث">
    <span class="material-symbols-outlined">search</span>
  </button>
</div>
<div id="searchPopup" class="search-popup-new">
  <input type="text" id="floatingSearchInput" placeholder="أبحث في الإقتباسات" onkeyup="filterQuotes()">
</div>

   <hr style="width: 100%; opacity: 0.5; margin: 30px auto;">
    <div class="character-section">
      <div class="character" id="jaime">
        <img src="https://i.postimg.cc/MTb2msrd/a55fb4f630dc5670131938a46305c3dd.jpg" alt="جايمي لانستر">
        <h2>چايمي لانستر</h2>
        <div class="quote">"كان العالم أبسط آنذاك، والرِّجال كالسُّيوف، مصنوعين من فولاذٍ أنقى. أم أن السَّبب أنه كان صبيًّا في الخامسة عشرة؟ جميعهم في قبورهم الآن؛ سيف الصَّباح والفارس الباسم، والثَّور الأبيض والأمير ليوين، والسير أوزويل وِنت بروح دُعابته السَّوداء وچون داري بسجيَّته الجادَّة، وسيمون توين وإخوانه في عصابة غابة الملوك وسَمنر كراكهول العجوز الفَظ. وأنا، ذلك الصَّبي الذي كنته... متى ماتَ يا تُرى؟ حين ارتديتُ المعطف الأبيض؟ حين شققتُ حَلق إيرس؟ ذلك الصَّبي أرادَ أن يُصبِح السير آرثر داين، لكنه في مكانٍ ما في أثناء رحلته صارَ الفارس الباسم.."
            <cite>-عاصفة السيوف-</cite>
          <button class="copy-btn" onclick="copyToClipboard(this)">نسخ</button>
        </div>
        <div class="quote">
قال كأنه وجد الفكرة طريفةً: «أتعتقدين أني أخشى الموت؟». - «يَجدُر بك أن تخاف، فلا بُدَّ أن آثامك ضمنَت لك مكانًا في قرار أعمق الجحائم السَّبع إذا كانت الآلهة عادلةً». - « أيُّ آلهةٍ تلك يا ليدي كاتلين؟ الآلهة التي كان زوجكِ يُصَلِّي لها؟ بِمَ نفعَته حين قطعَت أختي رأسه؟»، وأطلقَ چايمي ضحكةً قصيرةً، وتابعَ: «إذا كان للآلهة وجود، فلماذا يعجُّ العالم بالألم والظُّلم؟». - «بسبب أمثالك من الرِّجال». - «ليس هناك رجال مِثلي، هناك أنا فقط».
<cite>-صدام الملوك-</cite>
          <button class="copy-btn" onclick="copyToClipboard(this)">نسخ</button>
        </div>
   <div class="quote">
دعيني أقول إنني أجدُ من الغريب نوعًا أن يُحِبُّني شخص واحد لمعروفٍ لم أصنعه قَطُّ، بينما يكرهني كثيرون آخَرون بسبب أفضل ما اقترفتُ من أفعال. يوم تتويج روبرت أُمِرتُ بالرُّكوع عند قدميه الملكيَّتين إلى جوار المِايستر الأكبر پايسل وڤارس الخصيِّ، كي يغفر لنا جرائمنا قبل أن يُلحِقنا بخدمته، أمَّا ند فكان عليه أن يُقَبِّل اليد التي قتلَت إيرس، لكنه فضَّل أن يُؤَنِّبني لأنه وجدَني جالسًا على عرش روبرت.
<cite>-صدام الملوك-</cite>
          <button class="copy-btn" onclick="copyToClipboard(this)">نسخ</button>
        </div>
      </div>

       <hr style="width: 100%; opacity: 0.5; margin: 30px auto;">

      <div class="character" id="tyrion">
        <img src="https://i.postimg.cc/Zn7QwXPF/IMG-20250501-015354.jpg" alt="تيريون لانستر">
        <h2>تيريون لانستر</h2>
        <div class="quote">
          " «لم يكن حُلمًا». إنها حقيقة، كلُّ هذا حقيقة، الحروب والدَّسائس ولُعبة العروش الدَّامية، وأنا في مركزها بالضَّبط... أنا، القزم، الوحش، الذي تهكَّموا عليه وضحكوا منه، لكني أملكُ كلَّ شيءٍ الآن, السَّطوة والمدينة والفتاة. هذا ما خُلِقتُ من أجله، ولتُسامِحني الآلهة، هذا ما أحبُّه... وأحبُّها... وأحبُّها.."
<cite>-صدام الملوك-</cite>
          <button class="copy-btn" onclick="copyToClipboard(this)">نسخ</button>
        </div>
     
      </div>

         <hr style="width: 100%; opacity: 0.5; margin: 30px auto;">

      <div class="character" id="cersei">
        <img src="https://i.postimg.cc/rFHbxXwq/21aa5dc90a1972e2aec5b788c4d215ea.jpg" alt="سرسي لانستر">
        <h2>سرسي لانستر</h2>
        <div class="quote">"طفا وجه سرسي لانستر أمامه في الظَّلام وقد أضاءَ شَعرها كنور الشَّمس وحملَت شفتاها ابتسامةً ساخرةً وهي تهمس: «عندما تلعب لُعبة العروش، إمَّا أن تربح أو تموت »."
<cite>-لعبة العروش-</cite>
          <button class="copy-btn" onclick="copyToClipboard(this)">نسخ</button>
        </div>
      </div>
    </div>
  </div>



<script>
fetch('sidebar.html')
  .then(response => response.text())
  .then(data => {
    document.getElementById('sidebar-container').innerHTML = data;

    // حقن الهوية
    const familyNameSpan = document.getElementById('family-name');
    const familyLogoDiv = document.getElementById('family-logo');
    const sidebarTitle = document.getElementById('sidebar-title');

    if (sidebarTitle && familyNameSpan && familyLogoDiv) {
      sidebarTitle.innerHTML = `<span>${familyNameSpan.innerText}</span> ${familyLogoDiv.innerHTML}`;
    }

    // تفعيل السيوف
    const template = document.getElementById('sword-template');
    if (template) {
       const swordContent = template.innerHTML;
       document.querySelectorAll('.sword-icon').forEach(icon => {
         icon.innerHTML = swordContent;
       });
    }

    // تفعيل القوائم
    document.querySelectorAll('.dropbtn').forEach(button => {
      button.addEventListener('click', function (e) {
        e.stopPropagation();
        const family = this.parentElement;
        document.querySelectorAll('.family').forEach(f => {
          if (f !== family) f.classList.remove('open');
        });
        family.classList.toggle('open');
      });
    });
  })
  .catch(error => console.error('Error loading sidebar:', error));

// --- الدوال العامة ---

// 1. دالة البحث والفلترة المحدثة
function toggleSearch() {
  const popup = document.getElementById('searchPopup');
  const input = document.getElementById('floatingSearchInput');
  
  popup.classList.toggle('active');
  
  if (popup.classList.contains('active')) {
    input.focus();
  } else {
    input.value = ''; 
    filterQuotes(); 
  }
}

// دالة تصفية الاقتباسات وتمييز الكلمات
function filterQuotes() {
  const input = document.getElementById('floatingSearchInput');
  const filter = input.value.trim().toLowerCase();
  const characters = document.querySelectorAll('.character');

  characters.forEach(char => {
    let charHasVisibleQuotes = false;
    const quotes = char.querySelectorAll('.quote');

    quotes.forEach(quote => {
      // حفظ النص الأصلي لمنع تداخل عمليات البحث
      if (!quote.dataset.originalText) {
        quote.dataset.originalText = quote.innerHTML;
      }
      
      const originalHTML = quote.dataset.originalText;
      // تنظيف النص للبحث بدون تأثير الوسوم
      const tempDiv = document.createElement("div");
      tempDiv.innerHTML = originalHTML;
      const plainText = tempDiv.innerText.toLowerCase();

      if (filter === "") {
        // إعادة الحالة الطبيعية
        quote.innerHTML = originalHTML;
        quote.style.display = "";
        charHasVisibleQuotes = true;
      } else if (plainText.includes(filter)) {
        // إظهار الاقتباس المطابق فقط
        quote.style.display = "";
        charHasVisibleQuotes = true;
        
        // تمييز الكلمة داخل النص
        highlightText(quote, filter);
      } else {
        // إخفاء الاقتباس غير المطابق
        quote.style.display = "none";
      }
    });

    // التحكم في ظهور الشخصية (تظهر فقط إذا كان لها اقتباس مطابق)
    if (charHasVisibleQuotes) {
      char.style.display = "";
      if (char.previousElementSibling && char.previousElementSibling.tagName === 'HR') {
        char.previousElementSibling.style.display = "";
      }
    } else {
      char.style.display = "none";
      if (char.previousElementSibling && char.previousElementSibling.tagName === 'HR') {
        char.previousElementSibling.style.display = "none";
      }
    }
  });
}

// دالة تمييز النص (Highlight)
function highlightText(element, filter) {
  const originalHTML = element.dataset.originalText;
  // استخدام RegExp للبحث عن الكلمة مع تجاهل حالة الأحرف
  const regex = new RegExp(`(${filter})`, 'gi');
  
  // استبدال النص مع الحفاظ على التنسيق
  // ملاحظة: الـ regex هنا بسيط، سيقوم بتمييز الكلمات حتى لو كانت جزءاً من الروابط
  element.innerHTML = originalHTML.replace(regex, '<mark>$1</mark>');
}

// 2. دالة فتح القائمة الجانبية
function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  if (sidebar) sidebar.classList.toggle('visible');
}

// 3. إغلاق القائمة عند النقر خارجها
document.addEventListener('click', function(event) {
  const sidebar = document.getElementById('sidebar');
  const menuToggle = document.querySelector('.menu-toggle');
  if (sidebar && sidebar.classList.contains('visible') && !sidebar.contains(event.target) && !menuToggle.contains(event.target)) {
    sidebar.classList.remove('visible');
  }
});

// 4. دالة نسخ الاقتباس
function copyToClipboard(button) {
  // ننسخ النص من الداتا الأصلية لضمان عدم نسخ كلمة "تم النسخ" أو وسوم الـ <mark>
  const quoteDiv = button.parentElement;
  const tempDiv = document.createElement("div");
  tempDiv.innerHTML = quoteDiv.dataset.originalText || quoteDiv.innerHTML;
  
  // إزالة زر النسخ من النص المنسوخ
  const btnInTemp = tempDiv.querySelector('.copy-btn');
  if(btnInTemp) btnInTemp.remove();
  
  let textToCopy = tempDiv.innerText.trim();
  
  navigator.clipboard.writeText(textToCopy).then(() => {
    const originalText = button.textContent;
    button.textContent = "تم النسخ";
    setTimeout(() => button.textContent = originalText, 1500);
  });
}
</script>
</body>
</html>